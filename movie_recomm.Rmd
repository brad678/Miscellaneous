---
title: "Movie recommendation engine"
output: 
  html_document: 
    smart: no
---

https://github.com/jeknov/movieRec/blob/master/movieRec.R
https://muffynomster.wordpress.com/2015/06/07/building-a-movie-recommendation-engine-with-r/


### Project details: 


#### Domain: Entertainment
#### Project: IMDB - Recommendation
#### Data: movie_metadata.csv

#### Description
- This dataset contains 28 variables for 5043 movies, spanning across 100 years in 66 countries. There are 2399 unique director names, and thousands of actors/actresses. Below are the 28 variables:

movie_title                                          
color                                                          
num_critic_for_reviews                                               
movie_facebook_likes                                                
duration                                                        
director_name                                                       
director_facebook_likes                                                       
actor_3_name                                                              
actor_3_facebook_likes                                                      
actor_2_name                                                                           
actor_2_facebook_likes                                                                
actor_1_name                                                                         
actor_1_facebook_likes                                                        
gross                                                                
genres                                                                       
num_voted_users                                                                  
cast_total_facebook_likes                                                            
facenumber_in_poster                                                                  
plot_keywords                                                                   
movie_imdb_link                                                                 
num_user_for_reviews                                                          
language                                                                  
country                                                                  
content_rating                                                               
budget                                                                                 
title_year                                                                      
imdb_score                                                                          
aspect_ratio                                                                

#### Objective
- Given that thousands of movies were produced each year, is there a better way for us to tell the greatness of movie without relying on critics or our own instincts? And try to create a recommendation engine with this dataset.


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


### Loading required packages

```{r}

library(tidyr)
library(dplyr)
library(reshape2)

```


### Loading the data

```{r}

movies <- read.csv('movie_metadata.csv',stringsAsFactors=FALSE)
glimpse(movies)
summary(movies)

```

The missing values are present in:

num_critic_for_reviews(50)
duration(15)
director_facebbok_likes(104)
actor_3_facebook_likes(23)
actor_1_facebook_likes(7)
gross(884)
facenumber_in_poster(13)
num_user_for_reviews(21)
budget(492)
title_year(108)
actor_2_facebook_likes(13)
aspect_ratio(329)


### Removing the duplcate movies

```{r}

idx_dup <- which(duplicated(movies$movie_title)==TRUE)
movies <- movies[-idx_dup,]


```


### Finding columns and rows with missing values using function
```{r}
miss <- function(x) {
 cat('\nThe columns having missing values are:')
 for(i in 1:ncol(x)) {
  if(length(x[i][is.na(x[i])]) > 0) {
    cat('\n',names(x[i]),':',length(x[i][is.na(x[i])]))
  }
 } 
  cat('\n\nThe number of rows with missing values are:',nrow(x)-nrow(na.omit(x)))
  cat('\nThe proportion of missing values is:',signif((nrow(x)-nrow(na.omit(x)))/nrow(x),2))
}

miss(movies)
```


### Removing rows with missing values in budget and gross
### Missing values in rest of the columns can be replaced with zeros

```{r}

# remove the rows having missing values in budget and gross
idx <- which(is.na(movies$budget)==TRUE)
movies <- movies[-idx,]

idx <- which(is.na(movies$gross)==TRUE)
movies <- movies[-idx,]
 
# replace with zeros
movies[is.na(movies)] <- 0

# checking the missing values
miss(movies)
 

```

Now the dataset is clean and ready


### Write into csv file so as to do visualizations in tableau

```{r}

write.csv(movies,'movies_tab.csv')


```





